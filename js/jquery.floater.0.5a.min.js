/* ---------------------------------------------------------------------------/

Copyright (c) 2012 Piotr Falba (http://falba.pro/)
FLOATER jQuery Plugin v0.5a
MIT License

/--------------------------------------------------------------------------- */

(function(a){function l(a,b){var c=null;return function(){var d=this,e=arguments;clearTimeout(c);c=setTimeout(function(){a.apply(d,e)},b)}}var b;jQuery.event.special.resdom={setup:function(){var c=this,d=a(this),e=d.width();$originalHeight=d.height();b=setInterval(function(){if(e!=d.width()||$originalHeight!=d.height()){e=d.width();$originalHeight=d.height();jQuery.event.handle.call(c,{type:"resdom"})}},100)},teardown:function(){clearInterval(b)}};var d;var e=0;var f=0;var g;var h=0;var i=0;var j;var k={init:function(b){j=a.extend({duration:400,minimumMargin:20,maximumMargin:40,easing:"linear",boxClass:".box",fluidHeight:false,callback:false},b);g=j.boxClass;return this.each(function(){d=a(this);k.reposition();d.bind("resdom.floater",k.reposition);if(d.css("position")!="absolute"&&d.css("position")!="relative")d.css("position","relative");d.find(g).each(function(){var b=a(this);b.css({position:"absolute"})})})},destroy:function(){return this.each(function(){d.unbind(".floater")})},reposition:function(){function s(a){var f=0;for(r=0;r<i;r++){if(r==0){if(n.x<b)p=n.x/2;else p=(e-(h*(k+b)-b))/2;q=p}for(c=0;c<h;c++){if(c==0){if(n.x<b)o=n.x/2;else o=(e-(h*(k+b)-b))/2}d.find(g+":eq("+f+")").attr("column",c).attr("row",r).stop().animate({left:parseInt(o),top:parseInt(p)},j.duration,j.easing,function(){animation=false;if(j.callback)j.callback()});o=o+n.x+k;f++}p=p+n.x+l;if(j.fluidHeight)d.height(p-n.x+q)}}function m(){var a=(e-h*k)/h;if(a<b)return a;else return b}var a=j.minimumMargin;var b=j.maximumMargin;var k=d.find(g).first().width();var l=d.find(g).first().width();e=d.width();f=d.height();h=parseInt(e/(k+a));i=Math.ceil(d.find(g).length/h);var n={x:m()};var o,p;if(n.x<b){o=n.x/2;p=o}else{o=(e-h*(k+b)-b)/2;p=o}var q=0;s()},update:function(a){return this.each(function(){d.unbind(".floater");d.bind("resdom.floater",k.update)})}};a.fn.floater=function(b){if(k[b]){return k[b].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof b==="object"||!b){return k.init.apply(this,arguments)}else{a.error("Method "+method+" does not exist on jQuery.tooltip")}}})(jQuery)